---
import { getCollection } from "astro:content";

// obtener últimos 4 artículos ordenados por fecha
const posts = (await getCollection("blog"))
    .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
    .slice(0, 4);
---

<section class="w-full py-20 bg-gradient-to-b from-gray-50 to-gray-100">
  <div class="max-w-7xl mx-auto px-6">
    <h2 class="text-3xl font-extrabold text-center text-gray-800 mb-12 uppercase tracking-wide">
      Últimos artículos
    </h2>

    <!-- grid de cards -->
    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-4">
      {
        posts.map((post) => (
          <a
            href={`/blog/${post.slug}/`}
            class="group relative bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition transform hover:-translate-y-2 flex flex-col"
          >
            <!-- fondo con titulo -->
            <div class="h-40 bg-gradient-to-r from-blue-500 to-indigo-600 p-4 flex items-end">
              <h3 class="text-lg font-bold text-white line-clamp-2 group-hover:text-yellow-300 transition">
                {post.data.title}
              </h3>
            </div>

            <!-- contenido -->
            <div class="p-6 flex flex-col flex-1">
              <p class="text-sm text-gray-500">
                {new Date(post.data.date).toLocaleDateString()}
              </p>
              {post.data.description && (
                <p class="mt-3 text-gray-600 text-sm line-clamp-3 flex-1">
                  {post.data.description}
                </p>
              )}

              <!-- boton leer -->
              <div class="mt-4">
                <span
                  class="inline-block px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-md hover:bg-blue-700 transition"
                >
                  Leer más
                </span>
              </div>
            </div>
          </a>
        ))
      }
    </div>

    <!-- botón ver más -->
    <div class="mt-12 flex justify-center">
      <a
        href="/blog/"
        class="px-8 py-3 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 transition shadow-lg hover:shadow-xl transform hover:-translate-y-1"
      >
        Ver más artículos
      </a>
    </div>
  </div>
</section>
