---
import '../styles/global.css';
interface Props {
    logoSrc?: string;
    companyName?: string;
    currentPath?: string;
}

const {
    logoSrc = "/logo.svg",
    companyName = "30th Opps",
    currentPath = "/",
} = Astro.props;

const nav = [
    { name: "Inicio", href: "/" },
    { name: "Servicios", href: "/servicios" },
    { name: "Blog", href: "/blog" },
    { name: "Contacto", href: "/contacto" },
];
---

<header
    class="sticky top-0 z-50 bg-white/90 dark:bg-gray-900/80 backdrop-blur-lg border-b border-gray-200/60 dark:border-gray-800/60 shadow-lg transition-all"
>
    <div class="mx-auto max-w-7xl px-4 sm:px-8 lg:px-12">
        <div class="flex h-20 items-center justify-between">
            <!-- Logo + Nombre -->
            <a href="/" class="flex items-center gap-4">
                <img
                    src={logoSrc}
                    alt="Logo {companyName}"
                    class="h-10 w-10 rounded-2xl object-contain shadow-md"
                />
                <span
                    class="font-extrabold text-2xl tracking-tight text-indigo-700 dark:text-indigo-300"
                >
                    {companyName}
                </span>
            </a>

            <!-- Desktop Nav -->
            <nav class="hidden md:flex items-center gap-2">
                {
                    nav.map((item) => {
                        const active =
                            currentPath === item.href ||
                            (item.href !== "/" &&
                                currentPath.startsWith(item.href));
                        return (
                            <a
                                href={item.href}
                                class={`px-4 py-2 rounded-xl text-base font-medium transition
                ${
                    active
                        ? "bg-indigo-600 text-white shadow dark:bg-white dark:text-indigo-700"
                        : "text-gray-700 hover:bg-indigo-50 dark:text-gray-300 dark:hover:bg-gray-800"
                }`}
                            >
                                {item.name}
                            </a>
                        );
                    })
                }
            </nav>

            <!-- CTA -->
            <div class="hidden md:flex items-center">
                <a
                    href="/solicitar-visita"
                    class="inline-flex items-center rounded-xl px-5 py-2 text-base font-semibold shadow-lg transition
                 bg-gradient-to-r from-indigo-600 to-indigo-500 text-white hover:from-indigo-700 hover:to-indigo-600 dark:from-indigo-500 dark:to-indigo-400 dark:hover:from-indigo-600 dark:hover:to-indigo-500"
                >
                    Solicitar visita
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <button
                id="nav-toggle"
                aria-label="Abrir menÃº"
                class="md:hidden inline-flex items-center justify-center rounded-xl p-3
               text-indigo-700 hover:bg-indigo-50 dark:text-indigo-300 dark:hover:bg-gray-800 transition"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-7 w-7"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="1.5"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M3.75 6.75h16.5M3.75 12h16.5M3.75 17.25h16.5"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Mobile Nav -->
    <div
        id="mobile-menu"
        class="md:hidden hidden border-t border-gray-200/60 dark:border-gray-800/60 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg transition-all"
    >
        <div class="mx-auto max-w-7xl px-4 py-4 space-y-2">
            {
                nav.map((item) => {
                    const active =
                        currentPath === item.href ||
                        (item.href !== "/" &&
                            currentPath.startsWith(item.href));
                    return (
                        <a
                            href={item.href}
                            class={`block w-full px-4 py-3 rounded-xl text-base font-medium transition
              ${
                  active
                      ? "bg-indigo-600 text-white shadow dark:bg-white dark:text-indigo-700"
                      : "text-gray-700 hover:bg-indigo-50 dark:text-gray-300 dark:hover:bg-gray-800"
              }`}
                        >
                            {item.name}
                        </a>
                    );
                })
            }
            <a
                href="/solicitar-visita"
                class="block text-center rounded-xl px-5 py-3 text-base font-semibold transition
               bg-gradient-to-r from-indigo-600 to-indigo-500 text-white hover:from-indigo-700 hover:to-indigo-600 dark:from-indigo-500 dark:to-indigo-400 dark:hover:from-indigo-600 dark:hover:to-indigo-500 shadow-lg"
            >
                Solicitar visita
            </a>
        </div>
    </div>
</header>

<script is:inline>
    const btn = document.getElementById("nav-toggle");
    const menu = document.getElementById("mobile-menu");
    btn?.addEventListener("click", () => {
        menu?.classList.toggle("hidden");
    });
</script>
